<%
def fixture_text_data(name)
  render_text("#{RAILS_ROOT}/db/migrate/data/contents/#{name}")
end

def render_text(filename)
  data = File.open(filename,'rb').read
  data = data.gsub("\n",'\n')
  data = data.gsub('"','\"')
end
%>
<%
def fixture_binary_data(name)
  render_binary("#{RAILS_ROOT}/db/migrate/data/contents/#{name}")
end

def render_binary(filename)
  data = File.open(filename,'rb').read
  "!binary | #{[data].pack('m').gsub(/\n/,"\n    ")}\n"
end
%>

migrations:
  id: 1
  type: Cheatsheet
  title: Rails Migrations
  description: Up and down methods, rake tasks, database mapping, loading fixtures, example migration file, all packed onto one A4 page for an easy at-a-glance reference
  user_id: 1
  date: 2007-07-02 23:36:00
  content: "<%= fixture_text_data("cheatsheets/rails_migrations.txt") %>"
  permalink: rails-migrations
  
file_uploads:
  id: 2
  type: Article
  title: Beginning File Uploads to the Database
  description: Learn how to upload files to the database, then retrieve and display them
  user_id: 1
  date: 2007-07-02 23:36:00
  content: "<%= fixture_text_data("articles/file_uploads.txt") %>"
  permalink: beginning-file-uploads